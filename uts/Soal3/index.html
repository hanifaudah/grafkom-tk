<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <title>Soal 3</title>
    <style></style>
  </head>
  <body>
    <ul class="nav justify-content-center">
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="../index.html"
          >Home</a
        >
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Soal 1</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Soal 2</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../Soal3/index.html">Soal 3</a>
      </li>
    </ul>
    <div class="container d-flex justify-content-center">
      <canvas id="gl-canvas" width="512" height="512"></canvas>
    </div>

    <script id="vertex-shader" type="x-shader/x-vertex">
      #version 300 es

      // assume both position and normal are in homogeneous form

      in vec4 aPosition;
      in vec4 aNormal;

      out vec4 vColor;

      uniform vec4 uAmbientProduct, uDiffuseProduct, uSpecularProduct;
      uniform mat4 uModelViewMatrix;
      uniform mat4 uProjectionMatrix;
      uniform vec4 uLightPosition;
      uniform float uShininess;
      uniform mat3 uNormalMatrix;


      void
      main()
      {

          // pos is vertex position in eye coordinates

          vec3 pos = (uModelViewMatrix * aPosition).xyz;

          // vector from vertex position to light source

          vec3 L;

          // check for directional light

          if(uLightPosition.w == 0.0) L = normalize(uLightPosition.xyz);
          else L = normalize( uLightPosition.xyz - pos );

          // Because the eye point the is at the orgin
          // the vector from the vertex position to the eye is

          vec3 E = -normalize(pos);

          // halfway vector

          vec3 H = normalize(L + E);

          // Transform vertex normal into eye coordinates

          vec3 N = normalize( uNormalMatrix*aNormal.xyz);


          // Compute terms in the illumination equation
          vec4 ambient = uAmbientProduct;

          float Kd = max( dot(L, N), 0.0 );
          vec4 diffuse = Kd*uDiffuseProduct;

          float Ks = pow( max(dot(N, H), 0.0), uShininess );
          vec4 specular = Ks * uSpecularProduct;

          if( dot(L, N) < 0.0 ) {
              specular = vec4(0.0, 0.0, 0.0, 1.0);
          }

          gl_Position = uProjectionMatrix * uModelViewMatrix * aPosition;

          vColor = ambient + diffuse +specular;

          vColor.a = 1.0;
      }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
      #version 300 es

      precision mediump float;

      in vec4 vColor;
      out vec4 fColor;

      void
      main()
      {
          fColor = vColor;
      }
    </script>

    <script src="../Common/initShaders.js"></script>
    <script src="../Common/MVnew.js"></script>
    <script type="module" src="index.js"></script>
  </body>
</html>
